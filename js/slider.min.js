(function() {
    const listImage = document.querySelector('.list_image');
    const imgs = document.querySelectorAll('.list_image .list_image_card:nth-child(-n+7)');
    const btnLeft = document.querySelector('.btn-left');
    const btnRight = document.querySelector('.btn-right');
    const indicators = document.querySelectorAll('.index-item');
    const length = imgs.length;
    let current = 0;
    let width = imgs[0].offsetWidth;

    // Chuẩn bị cho các thay đổi để trình duyệt tối ưu hóa
    listImage.style.willChange = 'transform';
    
    const updateSlide = () => {
        requestAnimationFrame(() => {
            listImage.style.transform = `translateX(${-width * current}px)`;
          
        });
    };

    const handleChangeSlide = (direction = 1) => {
        current = (current + direction + length) % length;
        updateSlide();
    };


    btnRight.addEventListener('click', () => {
        handleChangeSlide(1);
    });

    btnLeft.addEventListener('click', () => {
        handleChangeSlide(-1);
    });

    // Đặt lại chiều rộng mỗi khi cửa sổ thay đổi kích thước để đảm bảo sự chính xác
    window.addEventListener('resize', () => {
        width = imgs[0].offsetWidth;
        updateSlide();
    });
})();